(function(t){function e(e){for(var a,n,o=e[0],c=e[1],l=e[2],p=0,u=[];p<o.length;p++)n=o[p],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&u.push(r[n][0]),r[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(u.length)u.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,o=1;o<s.length;o++){var c=s[o];0!==r[c]&&(a=!1)}a&&(i.splice(e--,1),t=n(n.s=s[0]))}return t}var a={},r={app:0},i=[];function n(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=a,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(s,a,function(e){return t[e]}.bind(null,a));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0b44":function(t,e,s){},"167b":function(t,e,s){},2271:function(t,e,s){"use strict";var a=s("167b"),r=s.n(a);r.a},"2b20":function(t,e,s){},"34e2":function(t,e,s){},"4a9c":function(t,e,s){},"526e":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("99af"),s("4de4"),s("4160"),s("fb6a"),s("0d03"),s("a9e3"),s("8ba4"),s("b64b"),s("d3b7"),s("25f0"),s("159b"),s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("bc3a"),r=s.n(a),i=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-fade-transition",{attrs:{mode:"out-in"}},[s("router-view")],1)},o=[],c={name:"App",data:function(){return{drawerIsOpen:!1}}},l=c,d=s("2877"),p=s("6544"),u=s.n(p),v=s("0789"),m=Object(d["a"])(l,n,o,!1,null,null,null),_=m.exports;u()(m,{VFadeTransition:v["c"]});var f=s("8c4f"),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{staticClass:"app-hub"},[s("v-app-bar",{attrs:{app:"",flat:""}},[s("v-toolbar-title",{staticClass:"header-title pr-2"},[t._v("Berking")]),s("v-chip",{attrs:{color:"primary",small:""}},[t._v(" beta ")])],1),s("v-content",[s("v-container",{staticClass:"full-height hub-btns",attrs:{fluid:""}},[s("v-row",{staticClass:"full-height hub-btns__row"},[s("v-col",{staticClass:"full-height text-center hub-btns__col1",attrs:{cols:"12"}},[s("v-btn",{staticClass:"btn-banking mb-12",attrs:{block:"",color:"primary",to:"/berking"}},[t._v("Banking ")]),s("v-btn",{staticClass:"btn-terminal",attrs:{outlined:"",block:"",color:"primary",to:"/terminal"}},[t._v("Terminal ")])],1)],1)],1)],1)],1)},g=[],b={data:function(){return{center:"center"}}},w=b,V=(s("89fc"),s("7496")),T=s("40dc"),C=s("8336"),S=s("cc20"),x=s("62ad"),y=s("a523"),k=s("a75b"),E=s("0fd9"),D=s("2a7f"),R=Object(d["a"])(w,h,g,!1,null,null,null),U=R.exports;u()(R,{VApp:V["a"],VAppBar:T["a"],VBtn:C["a"],VChip:S["a"],VCol:x["a"],VContainer:y["a"],VContent:k["a"],VRow:E["a"],VToolbarTitle:D["a"]});var A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{staticClass:"app-banking"},[t.userAuthorized?s("v-navigation-drawer",{attrs:{app:"",clipped:""},model:{value:t.showDrawer,callback:function(e){t.showDrawer=e},expression:"showDrawer"}},[s("v-list",{attrs:{nav:""}},[s("v-subheader",[t._v("What do you want to see ?")]),s("v-list-item-group",{attrs:{color:"primary"}},[s("v-list-item",{attrs:{exact:"",to:"/berking"}},[s("v-list-item-icon",[s("v-icon",[t._v("mdi-home")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Home")])],1)],1),s("v-list-item",{attrs:{exact:"",to:"/berking/cards"}},[s("v-list-item-icon",[s("v-icon",[t._v("mdi-credit-card-multiple-outline")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Cards")])],1)],1),s("v-list-item",{attrs:{exact:"",to:"/berking/transactions"}},[s("v-list-item-icon",[s("v-icon",[t._v("mdi-format-list-bulleted-square")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Transactions")])],1)],1),s("v-list-item",{attrs:{exact:"",to:"/berking/templates"}},[s("v-list-item-icon",[s("v-icon",[t._v("mdi-file-document-edit-outline")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Templates")])],1)],1),s("v-list-item",{attrs:{exact:"",to:"/berking/deposits"}},[s("v-list-item-icon",[s("v-icon",[t._v("mdi-cash-multiple")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Deposit")])],1)],1),s("v-list-item",{attrs:{exact:"",to:"/"}},[s("v-list-item-icon",[s("v-icon",[t._v("mdi-source-commit-start")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Root")])],1)],1)],1)],1)],1):t._e(),s("v-app-bar",{attrs:{app:"",flat:"","clipped-left":""}},[s("v-container",{attrs:{fluid:""}},[s("v-row",{attrs:{"no-gutters":"",align:"baseline"}},[s("v-col",{attrs:{cols:"4"}},[t.userAuthorized?s("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.showDrawer=!t.showDrawer}}}):t._e()],1),s("v-col",{staticClass:"text-center",attrs:{cols:"4"}},[s("v-toolbar-title",[s("router-link",{staticClass:"header-title",attrs:{to:"/berking/",tag:"span"}},[t._v(" Berking ")]),s("v-chip",{attrs:{color:"primary",small:""}},[t._v(" beta ")])],1)],1),s("v-col",{staticClass:"text-right",attrs:{cols:"4"}},[t.userAuthorized?s("v-btn",{attrs:{color:"primary"},on:{click:t.logout}},[t._v(" Log Out ")]):s("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("span",{staticClass:"kek"}),s("v-btn",t._g({directives:[{name:"test",rawName:"v-test",value:{id:"sgn-btn"},expression:"{ id: 'sgn-btn' }"}],attrs:{color:"primary",dark:""}},a),[t._v("Sign Up/In")])]}}],null,!1,3903657433),model:{value:t.dialogs.showAuthDialog,callback:function(e){t.$set(t.dialogs,"showAuthDialog",e)},expression:"dialogs.showAuthDialog"}},[s("v-card",[s("v-card-title",[t._v("Sign In")]),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-form",{on:{submit:function(t){t.preventDefault()}},model:{value:t.credValid.email.isValid,callback:function(e){t.$set(t.credValid.email,"isValid",e)},expression:"credValid.email.isValid"}},[s("v-text-field",{attrs:{label:"Email",type:"email",outlined:"",required:"",rules:t.credValid.email.rules},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-form",{on:{submit:function(t){t.preventDefault()}},model:{value:t.credValid.password.isValid,callback:function(e){t.$set(t.credValid.password,"isValid",e)},expression:"credValid.password.isValid"}},[s("v-text-field",{attrs:{label:"Password",type:"password",outlined:"",required:"",rules:t.credValid.password.ifExistsRules},on:{submit:function(t){t.preventDefault()}},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[t._v(" First time here ? "),s("v-btn",t._g({attrs:{text:"","x-small":""}},a),[t._v("Sign Up")])]}}],null,!1,1286312834),model:{value:t.dialogs.showRegistDialog,callback:function(e){t.$set(t.dialogs,"showRegistDialog",e)},expression:"dialogs.showRegistDialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[t._v("Sign Up")])]),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-form",{on:{submit:function(t){t.preventDefault()}},model:{value:t.credValid.user_name.firstIsValid,callback:function(e){t.$set(t.credValid.user_name,"firstIsValid",e)},expression:"credValid.user_name.firstIsValid"}},[s("v-text-field",{attrs:{label:"Legal first name",required:"",outlined:"",success:t.credValid.user_name.firstIsValid,rules:t.credValid.user_name.rules},model:{value:t.new_user.name_first,callback:function(e){t.$set(t.new_user,"name_first",e)},expression:"new_user.name_first"}})],1)],1),s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-form",{on:{submit:function(t){t.preventDefault()}},model:{value:t.credValid.user_name.middleIsValid,callback:function(e){t.$set(t.credValid.user_name,"middleIsValid",e)},expression:"\n                                      credValid.user_name.middleIsValid\n                                    "}},[s("v-text-field",{attrs:{label:"Legal middle name",required:"",outlined:"",success:t.credValid.user_name.middleIsValid,rules:t.credValid.user_name.rules},model:{value:t.new_user.name_middle,callback:function(e){t.$set(t.new_user,"name_middle",e)},expression:"new_user.name_middle"}})],1)],1),s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-form",{on:{submit:function(t){t.preventDefault()}},model:{value:t.credValid.user_name.lastIsValid,callback:function(e){t.$set(t.credValid.user_name,"lastIsValid",e)},expression:"credValid.user_name.lastIsValid"}},[s("v-text-field",{attrs:{label:"Legal last name",required:"",outlined:"",success:t.credValid.user_name.lastIsValid,rules:t.credValid.user_name.rules},model:{value:t.new_user.name_last,callback:function(e){t.$set(t.new_user,"name_last",e)},expression:"new_user.name_last"}})],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-form",{on:{submit:function(t){t.preventDefault()}},model:{value:t.credValid.email.isValid,callback:function(e){t.$set(t.credValid.email,"isValid",e)},expression:"credValid.email.isValid"}},[s("v-text-field",{attrs:{label:"Email",type:"email",required:"",outlined:"",success:t.credValid.email.isValid,rules:t.credValid.email.rules},model:{value:t.new_user.email,callback:function(e){t.$set(t.new_user,"email",e)},expression:"new_user.email"}})],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-form",{on:{submit:function(t){t.preventDefault()}},model:{value:t.credValid.password.isValid,callback:function(e){t.$set(t.credValid.password,"isValid",e)},expression:"credValid.password.isValid"}},[s("v-text-field",{attrs:{label:"Password",type:"password",required:"",outlined:"",error:!t.passwordIsValid,success:t.passwordIsValid},model:{value:t.new_user.password,callback:function(e){t.$set(t.new_user,"password",e)},expression:"new_user.password"}})],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-checkbox",{attrs:{success:t.passwordLength,error:!t.passwordLength,label:"Password must be at least 10 characters long",readonly:""},model:{value:t.passwordLength,callback:function(e){t.passwordLength=e},expression:"passwordLength"}}),s("v-checkbox",{attrs:{success:t.passwordNumbers,error:!t.passwordNumbers,label:"Password must contain at least 3 numbers",readonly:""},model:{value:t.passwordNumbers,callback:function(e){t.passwordNumbers=e},expression:"passwordNumbers"}}),s("v-checkbox",{attrs:{success:t.passwordLetters,error:!t.passwordLetters,label:"Password must be at least 3 capital letters",readonly:""},model:{value:t.passwordLetters,callback:function(e){t.passwordLetters=e},expression:"passwordLetters"}})],1),s("v-scroll-x-transition",[t.processes.registr.bad?s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" "+t._s(t.processes.registr.details)+" ")])],1):t._e()],1),s("v-scroll-x-transition",[t.processes.registr.failed?s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" "+t._s(t.processes.registr.details)+" ")])],1):t._e()],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(e){t.dialogs.showRegistDialog=!1}}},[t._v("Close")]),s("v-btn",{attrs:{color:"primary",loading:t.processes.registr.active,disabled:t.newUserDataValid},on:{click:t.registerUser}},[t._v("Submit")])],1)],1)],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[t._v(" Forgot your password ? "),s("v-btn",t._g({attrs:{text:"","x-small":""}},a),[t._v("Change password")])]}}],null,!1,2601744689),model:{value:t.dialogs.showPassRenovDialog,callback:function(e){t.$set(t.dialogs,"showPassRenovDialog",e)},expression:"dialogs.showPassRenovDialog"}},[s("v-card",[s("v-card-title",[t._v(" Change password ")]),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-form",{on:{submit:function(t){t.preventDefault()}},model:{value:t.credValid.email.isValid,callback:function(e){t.$set(t.credValid.email,"isValid",e)},expression:"credValid.email.isValid"}},[s("v-text-field",{attrs:{type:"email",required:"",outlined:"",label:"Email",rules:t.credValid.email.rules},model:{value:t.new_password.email,callback:function(e){t.$set(t.new_password,"email",e)},expression:"new_password.email"}})],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-form",{on:{submit:function(t){t.preventDefault()}},model:{value:t.credValid.password.isValid,callback:function(e){t.$set(t.credValid.password,"isValid",e)},expression:"credValid.password.isValid"}},[s("v-text-field",{attrs:{type:"password",required:"",outlined:"",label:"Old password",rules:t.credValid.password.ifExistsRules},model:{value:t.new_password.password,callback:function(e){t.$set(t.new_password,"password",e)},expression:"new_password.password"}})],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-form",{on:{submit:function(t){t.preventDefault()}},model:{value:t.credValid.password.isValid,callback:function(e){t.$set(t.credValid.password,"isValid",e)},expression:"credValid.password.isValid"}},[s("v-text-field",{attrs:{label:"New password",type:"password",required:"",outlined:"",error:!t.newPasswordIsValid,success:t.newPasswordIsValid},model:{value:t.new_password.password_new,callback:function(e){t.$set(t.new_password,"password_new",e)},expression:"new_password.password_new"}})],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-checkbox",{attrs:{success:t.newPassworddLength,error:!t.newPassworddLength,label:"Password must be at least 10 characters long",readonly:""},model:{value:t.newPassworddLength,callback:function(e){t.newPassworddLength=e},expression:"newPassworddLength"}}),s("v-checkbox",{attrs:{success:t.newPasswordNumbers,error:!t.newPasswordNumbers,label:"Password must contain at least 3 numbers",readonly:""},model:{value:t.newPasswordNumbers,callback:function(e){t.newPasswordNumbers=e},expression:"newPasswordNumbers"}}),s("v-checkbox",{attrs:{success:t.newPasswordLetters,error:!t.newPasswordLetters,label:"Password must be at least 3 capital letters",readonly:""},model:{value:t.newPasswordLetters,callback:function(e){t.newPasswordLetters=e},expression:"newPasswordLetters"}})],1),s("v-scroll-x-transition",[t.processes.change_password.bad?s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" "+t._s(t.processes.change_password.details)+" ")])],1):t._e()],1),s("v-scroll-x-transition",[t.processes.change_password.failed?s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" "+t._s(t.processes.change_password.details)+" ")])],1):t._e()],1),s("v-scroll-x-transition",[t.processes.change_password.good?s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{dense:"",outlined:"",type:"success"}},[t._v(" "+t._s(t.processes.change_password.details)+" ")])],1):t._e()],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"primary",disabled:t.processes.change_password.good,outlined:""},on:{click:function(e){t.dialogs.showPassRenovDialog=!1}}},[t._v("Close")]),s("v-btn",{attrs:{color:"primary",loading:t.processes.change_password.active,disabled:t.newPasswordDataValid},on:{click:t.changePassword}},[t._v("Submit")])],1)],1)],1)],1),s("v-scroll-x-transition",[t.processes.auth.bad?s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" "+t._s(t.processes.auth.details)+" ")])],1):t._e()],1),s("v-scroll-x-transition",[t.processes.auth.failed?s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" "+t._s(t.processes.auth.details)+" ")])],1):t._e()],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(e){t.dialogs.showAuthDialog=!1}}},[t._v("Close")]),s("v-btn",{attrs:{color:"primary",disabled:!t.credValid.email.isValid||!t.credValid.password.isValid,loading:t.processes.auth.active},on:{click:t.authorizeUser}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1),s("v-content",[t.userAuthorized?s("v-container",{attrs:{fluid:""}},[s("v-fade-transition",{attrs:{mode:"out-in"}},[s("router-view")],1)],1):s("v-container",[s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"4"}},[s("v-card",{attrs:{color:"warning"}},[s("v-card-title",{staticClass:"white--text justify-center"},[t._v(" Attention! ")]),s("v-card-text",{staticClass:"white--text text-center"},[t._v(" To use the service authorize or register first. "),s("br"),t._v(" To do, this press the button in the upper-right corner. "),s("v-icon",{staticClass:"white--text mt-1"},[t._v("mdi-arrow-top-right")])],1)],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-img",{attrs:{src:"https://i.gifer.com/7VE.gif","max-height":"500",contain:!0}})],1)],1)],1)],1),s("v-footer",{staticClass:"footer",attrs:{app:""}},[s("div",{staticClass:"text-center",staticStyle:{width:"100%"}},[t._v(" © Berking 2019 ")])])],1)},P=[];s("ac1f"),s("466d");function I(){return{active:"active",finished:{pos:"finished_positive",neg:"finished_negative"},failed:"failed"}}var $={data:function(){return{showDrawer:!0,dialogs:{showAuthDialog:!1,showRegistDialog:!1,showPassRenovDialog:!1},credValid:{email:{isValid:!0,rules:[function(t){return t&&/^.+@.+\..+$/.test(t)||"Invalid email"}]},password:{isValid:!0,ifExistsRules:[function(t){return t&&t.length>0||"Enter you password"}],ifNewRules:[function(t){return t&&t.length>=10||"Password must be at least 10 characters long"},function(t){return t&&null!==t.match(/\d/g)&&t.match(/\d/g).length>=3||"Password must contain at least 3 numbers"},function(t){return t&&null!==t.match(/[A-Z]/g)&&t.match(/[A-Z]/g).length>=3||"Password must contain at least 3 capital letters"}]},user_name:{firstIsValid:!0,lastIsValid:!0,middleIsValid:!0,rules:[function(t){return t&&t.length>0||"Name cannot be empty"},function(t){return/^[a-zA-Z]+$/g.test(t)||"Name can contain letters only"}]}},user:{email:"",password:""},new_user:{name_first:"",name_middle:"",name_last:"",email:"",password:""},new_password:{email:"",password:"",password_new:""},processes:{auth:{active:!1,bad:!1,failed:!1,details:"",error:""},registr:{active:!1,bad:!1,failed:!1,details:"",error:""},change_password:{active:!1,bad:!1,good:!1,failed:!1,details:"",error:""}}}},methods:{authorizeUser:function(){var t=this;this.processes.auth.active=!0,this.$store.dispatch("authorizeUser",Object.assign({},this.user)).then((function(e){e.status===I().finished.pos&&(t.showAuthDialog=!1,t.showRegistDialog=!1,t.processes.auth.active=!1,t.processes.auth.bad=!1,t.processes.auth.failed=!1,t.user.email="",t.user.password="","/berking"!==t.$route.path&&t.$router.push({path:"/berking"}),t.refreshToken()),e.status===I().finished.neg&&(t.processes.auth.active=!1,t.processes.auth.failed=!1,t.processes.auth.bad=!0,t.processes.auth.details=e.details)}),(function(e){t.processes.auth.bad=!1,t.processes.auth.active=!1,t.processes.auth.failed=!0,t.processes.auth.details=e.details,t.processes.auth.error=e.error}))},registerUser:function(){var t=this;this.processes.registr.active=!0,this.$store.dispatch("registerUser",Object.assign({},this.new_user)).then((function(e){e.status===I().finished.pos&&(t.showRegistDialog=!1,t.showAuthDialog=!1,t.processes.registr.active=!1,t.processes.registr.bad=!1,t.processes.registr.failed=!1,t.new_user.name_first="",t.new_user.name_middle="",t.new_user.name_last="",t.new_user.email="",t.new_user.password="","/berking"!==t.$route.path&&t.$router.push({path:"/berking"}),t.refreshToken()),e.status===I().finished.neg&&(t.processes.registr.active=!1,t.processes.registr.failed=!1,t.processes.registr.bad=!0,t.processes.registr.details=e.details)}),(function(e){t.processes.registr.bad=!1,t.processes.registr.active=!1,t.processes.registr.failed=!0,t.processes.registr.details=e.details,t.processes.registr.error=e.error}))},changePassword:function(){var t=this;this.processes.change_password.active=!0,this.$store.dispatch("changePassword",Object.assign({},this.new_password)).then((function(e){e.status===I().finished.pos&&(t.processes.change_password.active=!1,t.processes.change_password.bad=!1,t.processes.change_password.failed=!1,t.processes.change_password.good=!0,t.processes.change_password.details=e.details,t.user.password_new="",t.user.password="",t.user.email="",setTimeout((function(){t.dialogs.showPassRenovDialog=!1,t.processes.change_password.good=!1}),1e3)),e.status===I().finished.neg&&(t.processes.change_password.active=!1,t.processes.change_password.failed=!1,t.processes.change_password.bad=!0,t.processes.change_password.details=e.details)}),(function(e){t.processes.change_password.bad=!1,t.processes.change_password.active=!1,t.processes.change_password.failed=!0,t.processes.change_password.details=e.details,t.processes.change_password.error=e.error}))},logout:function(){this.$store.dispatch("logout")},refreshToken:function(){var t=this;setTimeout((function(){t.$store.dispatch("refreshWebtoken").then((function(){t.refreshToken()}))}),72e5)}},computed:{userAuthorized:function(){return this.$store.getters.getAuthorizationStatus},requestStatus:function(){return this.$store.getters.getRequestStatus},newUserDataValid:function(){return!this.credValid.email.isValid||!this.passwordIsValid||!this.credValid.user_name.firstIsValid||!this.credValid.user_name.middleIsValid||!this.credValid.user_name.lastIsValid},newPasswordDataValid:function(){return!this.credValid.email.isValid||!this.newPasswordIsValid||!this.credValid.password.isValid},passwordLength:function(){return!0===this.credValid.password.ifNewRules[0](this.new_user.password)},newPassworddLength:function(){return!0===this.credValid.password.ifNewRules[0](this.new_password.password_new)},passwordNumbers:function(){return!0===this.credValid.password.ifNewRules[1](this.new_user.password)},newPasswordNumbers:function(){return!0===this.credValid.password.ifNewRules[1](this.new_password.password_new)},passwordLetters:function(){return!0===this.credValid.password.ifNewRules[2](this.new_user.password)},newPasswordLetters:function(){return!0===this.credValid.password.ifNewRules[2](this.new_password.password_new)},passwordIsValid:function(){return this.passwordLength&&this.passwordNumbers&&this.passwordLetters},newPasswordIsValid:function(){return this.newPassworddLength&&this.newPasswordNumbers&&this.newPasswordLetters}},created:function(){this.userAuthorized&&this.refreshToken()}},N=$,O=(s("805c"),s("0798")),q=s("5bc1"),j=s("b0af"),L=s("99d9"),F=s("ac7c"),Q=s("169a"),B=s("553a"),M=s("4bd4"),z=s("132d"),W=s("adda"),J=s("8860"),H=s("da13"),X=s("5d23"),Y=s("1baa"),G=s("34c3"),Z=s("f774"),K=s("2fa4"),tt=s("e0c7"),et=s("8654"),st=Object(d["a"])(N,A,P,!1,null,null,null),at=st.exports;u()(st,{VAlert:O["a"],VApp:V["a"],VAppBar:T["a"],VAppBarNavIcon:q["a"],VBtn:C["a"],VCard:j["a"],VCardActions:L["a"],VCardText:L["b"],VCardTitle:L["c"],VCheckbox:F["a"],VChip:S["a"],VCol:x["a"],VContainer:y["a"],VContent:k["a"],VDialog:Q["a"],VFadeTransition:v["c"],VFooter:B["a"],VForm:M["a"],VIcon:z["a"],VImg:W["a"],VList:J["a"],VListItem:H["a"],VListItemContent:X["a"],VListItemGroup:Y["a"],VListItemIcon:G["a"],VListItemTitle:X["b"],VNavigationDrawer:Z["a"],VRow:E["a"],VScrollXTransition:v["d"],VSpacer:K["a"],VSubheader:tt["a"],VTextField:et["a"],VToolbarTitle:D["a"]});var rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-row",[s("v-col",{attrs:{cols:"6"}},[s("v-card",{attrs:{raised:""}},[s("v-card-title",[t._v(" Last Transactions ")]),s("v-card-text",[s("v-container",[t.transactions.length>0?s("v-row",{attrs:{dense:""}},t._l(t.transactions,(function(t,e){return s("v-col",{key:e,attrs:{cols:"12"}},[s("app-transaction",{attrs:{transaction_data:t}})],1)})),1):t.processes.fetchTransactions.active?s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"info"}},[t._v(" Fetching transactions from the server. Please wait. "),s("div",{staticClass:"text-right mt-2"},[s("v-progress-circular",{attrs:{indeterminate:"",color:"white",size:"20"}})],1)])],1)],1):t.processes.fetchTransactions.failed?s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"error"}},[t._v(" "+t._s(t.processes.fetchTransactions.details)+" ")])],1)],1):0===t.transactions.length?s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"info"}},[t._v(" You don't have any transactions now. If you want to make one, go to the "),s("router-link",{staticClass:"white--text",attrs:{to:"/berking/transactions"}},[t._v("Transactions")]),t._v(" section ")],1)],1)],1):t._e()],1)],1),s("v-card-actions",[s("v-btn",{attrs:{color:"primary",block:"",to:"/berking/transactions"}},[t._v("More")])],1)],1)],1),s("v-col",{attrs:{cols:"6"}},[s("v-card",{attrs:{raised:""}},[s("v-card-title",[t._v(" Cards ")]),s("v-card-text",[s("v-container",[t.cards.length>0?s("v-row",{attrs:{dense:""}},t._l(t.cards,(function(t,e){return s("v-col",{key:e,attrs:{cols:"12"}},[s("app-card",{attrs:{card_data:t}})],1)})),1):t.processes.fetchCards.active?s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"info"}},[t._v(" Fetching cards from the server. Please wait. "),s("div",{staticClass:"text-right mt-2"},[s("v-progress-circular",{attrs:{indeterminate:"",color:"white",size:"20"}})],1)])],1)],1):t.processes.fetchCards.failed?s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"error"}},[t._v(" "+t._s(t.processes.fetchCards.details)+" ")])],1)],1):0===t.cards.length?s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"info"}},[t._v(" You don't have any transactions now. If you want to make one, go to the "),s("router-link",{staticClass:"white--text",attrs:{to:"/berking/cards"}},[t._v("Cards")]),t._v(" section ")],1)],1)],1):t._e()],1)],1),s("v-card-actions",[s("v-btn",{attrs:{color:"primary",block:"",to:"/berking/cards"}},[t._v("More")])],1)],1)],1)],1)},it=[],nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"user-card",attrs:{otlined:""}},[t.card_data.hasOwnProperty("card_name")&&""!==t.card_data.card_name?s("v-card-title",[t._v(" "+t._s(t.card_data.card_name)+" ")]):t._e(),s("v-card-text",[s("p",{staticClass:"text--primary subtitle-1"},[t._v(" Card number: "),s("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t._f("formatCardNum")(t.card_data.card_number))+" ")])]),s("p",{staticClass:"text--primary subtitle-1"},[t._v(" Balance: "),s("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t.card_data.card_balance)+" ")])]),s("p",{staticClass:"text--primary subtitle-1"},[t._v(" Expiration date: "),s("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t.card_data.card_expiration)+" ")])])])],1)},ot=[],ct={props:{card_data:{type:Object,required:!0}}},lt=ct,dt=(s("b66d"),Object(d["a"])(lt,nt,ot,!1,null,null,null)),pt=dt.exports;u()(dt,{VCard:j["a"],VCardText:L["b"],VCardTitle:L["c"]});var ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"user-transaction",attrs:{outlined:""}},[s("v-card-title",[t._v(" "+t._s(t.transaction_data.date)+" ")]),s("v-card-text",[s("p",{staticClass:"text--primary subtitle-1"},[t._v(" Sender: "),s("span",{staticClass:"font-weight-medium"},[t._v(" ("+t._s(t._f("formatCardNumWithMask")(t.transaction_data.sender_card))+") ")])]),s("p",{staticClass:"text--primary subtitle-1"},[t._v(" Receiver: "),s("span",{staticClass:"font-weight-medium"},[t._v(" ("+t._s(t._f("formatCardNumWithMask")(t.transaction_data.receiver_card))+") ")])]),s("p",{staticClass:"text--primary subtitle-1"},[t._v(" Date: "),s("span",{staticClass:"font-weight-medium"},[t._v(" ("+t._s(t.transaction_data.date)+") ")])]),s("p",{staticClass:"text--primary subtitle-1"},[t._v(" Sum: "),s("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t.transaction_data.sum)+" ")])]),""!=t.transaction_data.description?s("v-expansion-panels",[s("v-expansion-panel",{staticClass:"description"},[s("v-expansion-panel-header",{staticClass:"description-title"},[t._v("Description")]),s("v-expansion-panel-content",{staticClass:"subtitle-1"},[t._v(" "+t._s(t.transaction_data.description)+" ")])],1)],1):t._e()],1)],1)},vt=[],mt={props:{transaction_data:{type:Object,required:!0}}},_t=mt,ft=(s("89d8"),s("cd55")),ht=s("49e2"),gt=s("c865"),bt=s("0393"),wt=Object(d["a"])(_t,ut,vt,!1,null,null,null),Vt=wt.exports;u()(wt,{VCard:j["a"],VCardText:L["b"],VCardTitle:L["c"],VExpansionPanel:ft["a"],VExpansionPanelContent:ht["a"],VExpansionPanelHeader:gt["a"],VExpansionPanels:bt["a"]});var Tt={data:function(){return{processes:{fetchCards:{active:!1,failed:!1,details:""},fetchTransactions:{active:!1,failed:!1,details:""}}}},computed:{cards:function(){var t=this.$store.getters.getCards;return t.slice(0,2)},transactions:function(){var t=this.$store.getters.getTransactions;return t.slice(0,2)}},components:{appCard:pt,appTransaction:Vt},beforeRouteEnter:function(t,e,s){s((function(t){var e=t;e.processes.fetchCards.active=!0,e.processes.fetchTransactions.active=!0,e.$store.dispatch("fetchCards").then((function(t){e.processes.fetchCards.active=!1,e.processes.fetchCards.failed=!1,e.processes.fetchCards.details=t.details,e.$store.dispatch("fetchTransactions").then((function(t){e.processes.fetchTransactions.active=!1,e.processes.fetchTransactions.failed=!1,e.processes.fetchTransactions.details=t.details}),(function(t){e.processes.fetchTransactions.active=!1,e.processes.fetchTransactions.failed=!0,e.processes.fetchTransactions.details=t.details}))}),(function(t){e.processes.fetchCards.failed=!0,e.processes.fetchCards.active=!1,e.processes.fetchCards.details=t.details}))}))}},Ct=Tt,St=s("490a"),xt=Object(d["a"])(Ct,rt,it,!1,null,null,null),yt=xt.exports;u()(xt,{VAlert:O["a"],VBtn:C["a"],VCard:j["a"],VCardActions:L["a"],VCardText:L["b"],VCardTitle:L["c"],VCol:x["a"],VContainer:y["a"],VProgressCircular:St["a"],VRow:E["a"]});var kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.processes.fetchCards.active||t.processes.fetchCards.failed?t.processes.fetchCards.active?s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"info"}},[t._v(" Fetching cards from the server. Please wait. "),s("div",{staticClass:"text-right mt-2"},[s("v-progress-circular",{attrs:{indeterminate:"",color:"white"}})],1)])],1)],1):t.processes.fetchCards.failed?s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"error"}},[t._v(" "+t._s(t.processes.fetchCards.details)+" ")])],1)],1):t._e():s("v-row",[s("v-col",{staticClass:"text-center",attrs:{rows:"12"}},[s("h2",{staticClass:"cards-counter"},[t._v("You have "+t._s(t.cards.length)+" / 10 cards")])]),t._l(t.cards,(function(t,e){return s("v-col",{key:e,attrs:{cols:"12"}},[s("app-card",{attrs:{card_data:t}})],1)})),s("v-col",{attrs:{cols:"12"}},[s("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[10!==t.cards.length?s("v-btn",t._g({attrs:{block:"",color:"primary",dark:""}},a),[t._v(" Add Card ")]):s("v-alert",{attrs:{type:"info"}},[t._v(" You can't create more than 10 cards. ")])]}}],null,!1,192547229),model:{value:t.showCreateCardDialog,callback:function(e){t.showCreateCardDialog=e},expression:"showCreateCardDialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[t._v("Create a Card")])]),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"Card name (optional)",type:"text",required:""},model:{value:t.new_card.card_name,callback:function(e){t.$set(t.new_card,"card_name",e)},expression:"new_card.card_name"}})],1),s("v-scroll-x-transition",[t.processes.create_card.failed?s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" "+t._s(t.processes.create_card.details)+" ")])],1):t._e()],1),s("v-scroll-x-transition",[t.processes.create_card.good?s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{dense:"",outlined:"",type:"success"}},[t._v(" "+t._s(t.processes.create_card.details)+" ")])],1):t._e()],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.processes.create_card.good},on:{click:function(e){t.showCreateCardDialog=!1}}},[t._v("Close")]),s("v-btn",{attrs:{color:"blue darken-1",text:"",loading:t.processes.create_card.active,disabled:t.processes.create_card.good},on:{click:t.createCard}},[t._v("Submit")])],1)],1)],1)],1)],2)},Et=[],Dt={components:{appCard:pt},data:function(){return{showCreateCardDialog:!1,new_card:{card_name:""},processes:{create_card:{active:!1,good:!1,bad:!1,failed:!1,details:"",error:""},fetchCards:{active:!1,failed:!1,details:""}}}},methods:{createCard:function(){var t=this;this.processes.create_card.active=!0,this.$store.dispatch("addCard",this.new_card.card_name.slice(0)).then((function(e){t.processes.create_card.active=!1,t.processes.create_card.bad=!1,t.processes.create_card.failed=!1,t.processes.create_card.good=!0,t.processes.create_card.details=e.details,t.new_card.card_name="",setTimeout((function(){t.showCreateCardDialog=!1,t.processes.create_card.good=!1}),1e3)}),(function(e){t.processes.create_card.bad=!1,t.processes.create_card.active=!1,t.processes.create_card.failed=!0,t.processes.create_card.details=e.details,t.processes.create_card.error=e.error}))}},computed:{cards:function(){return this.$store.getters.getCards}},beforeRouteEnter:function(t,e,s){s((function(t){var e=t;e.processes.fetchCards.active=!0,e.$store.dispatch("fetchCards").then((function(t){e.processes.fetchCards.active=!1,e.processes.fetchCards.failed=!1,e.processes.fetchCards.details=t.details}),(function(t){e.processes.fetchCards.failed=!0,e.processes.fetchCards.active=!1,e.processes.fetchCards.details=t.details}))}))}},Rt=Dt,Ut=(s("2271"),Object(d["a"])(Rt,kt,Et,!1,null,null,null)),At=Ut.exports;u()(Ut,{VAlert:O["a"],VBtn:C["a"],VCard:j["a"],VCardActions:L["a"],VCardText:L["b"],VCardTitle:L["c"],VCol:x["a"],VContainer:y["a"],VDialog:Q["a"],VProgressCircular:St["a"],VRow:E["a"],VScrollXTransition:v["d"],VSpacer:K["a"],VTextField:et["a"]});var Pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.processes.fetchTransactions.active||t.processes.fetchTransactions.failed?t.processes.fetchTransactions.active?s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"info"}},[t._v(" Fetching transactions from the server. Please wait. "),s("div",{staticClass:"text-right mt-2"},[s("v-progress-circular",{attrs:{indeterminate:"",color:"white"}})],1)])],1)],1):t.processes.fetchTransactions.failed?s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"error"}},[t._v(" Failed to fetch transactions from the server. ")])],1)],1):t._e():s("v-row",[t._l(t.transactions,(function(t,e){return s("v-col",{key:e,attrs:{cols:"12"}},[s("app-transaction",{attrs:{transaction_data:t}})],1)})),s("v-col",{attrs:{cols:"12"}},[s("v-dialog",{attrs:{persistent:"","max-width":"800px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[t.cards.length>0?s("v-btn",t._g({attrs:{block:"",color:"primary",dark:""}},a),[t._v("Make Transaction")]):t._e(),0==t.cards.length?s("div",{staticClass:"text-center"},[s("v-alert",{attrs:{type:"info"}},[t._v(" To make a transaction you need at least one card created. ")])],1):t._e()]}}],null,!1,4277071974),model:{value:t.showMakeTransactionDialog,callback:function(e){t.showMakeTransactionDialog=e},expression:"showMakeTransactionDialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[t._v("Make Transaction")])]),s("v-card-text",[s("v-stepper",{model:{value:t.stepNum,callback:function(e){t.stepNum=e},expression:"stepNum"}},[s("v-stepper-header",[s("v-stepper-step",{attrs:{complete:t.stepNum>1,step:"1"}},[t._v("Sender card")]),s("v-divider"),s("v-stepper-step",{attrs:{complete:t.stepNum>2,step:"2"}},[t._v("Money and description")]),s("v-divider"),s("v-stepper-step",{attrs:{complete:t.stepNum>3,step:"3"}},[t._v("Receiver card")]),s("v-divider"),s("v-stepper-step",{attrs:{step:"4"}},[t._v("Confirmation")])],1),s("v-stepper-items",[s("v-stepper-content",{attrs:{step:"1"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[t._v("Pick a Card")]),s("v-card-text",[s("v-list",[s("v-subheader",[t._v("Pick a card to draw money from")]),s("v-list-item-group",{attrs:{color:"primary"},model:{value:t.sender_card_num,callback:function(e){t.sender_card_num=e},expression:"sender_card_num"}},t._l(t.cards,(function(e,a){return s("v-list-item",{key:a},[s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s(e.card_number)}})],1)],1)})),1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"primary darken-1"},on:{click:function(e){t.stepNum=2}}},[t._v("Confirm")]),s("v-btn",{attrs:{color:"primary darken-1",outlined:""},on:{click:function(e){t.showMakeTransactionDialog=!1}}},[t._v("Cancel")])],1)],1)],1),s("v-stepper-content",{attrs:{step:"2"}},[s("v-card",[s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-form",{model:{value:t.inputValid.money.isValid,callback:function(e){t.$set(t.inputValid.money,"isValid",e)},expression:"inputValid.money.isValid"}},[s("v-text-field",{attrs:{label:"Amount of money",type:"number",required:"",rules:t.inputValid.money.rules},model:{value:t.transaction.data.sum,callback:function(e){t.$set(t.transaction.data,"sum",e)},expression:"transaction.data.sum"}})],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-textarea",{attrs:{"auto-grow":"",solo:"",outlined:"",label:"Description (optional)"},model:{value:t.transaction.data.description,callback:function(e){t.$set(t.transaction.data,"description",e)},expression:"transaction.data.description"}})],1),s("v-slide-x-transition",[t.inputValid.sender_balance.isValid?t._e():s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"error"}},[t._v(" Your previosly selected card doesn't have enough money for the transaction. ")])],1)],1)],1)],1)],1),s("v-card-actions",[s("v-btn",{attrs:{color:"primary",disabled:!t.inputValid.money.isValid},on:{click:t.checkBalance}},[t._v(" Continue ")]),s("v-btn",{attrs:{text:""},on:{click:function(e){t.stepNum=1}}},[t._v("Back")])],1)],1)],1),s("v-stepper-content",{attrs:{step:"3"}},[s("v-card",[s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-form",{model:{value:t.inputValid.card.isValid,callback:function(e){t.$set(t.inputValid.card,"isValid",e)},expression:"inputValid.card.isValid"}},[s("v-text-field",{attrs:{label:"Receiver card number",type:"text",required:"",rules:t.inputValid.card.rules,counter:16},model:{value:t.transaction.data.receiver_card,callback:function(e){t.$set(t.transaction.data,"receiver_card",e)},expression:"transaction.data.receiver_card"}})],1)],1),s("v-slide-x-transition",[t.transaction.cards.areUnequal?t._e():s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"error"}},[t._v(" Sender and receiver cards cannot be equal. ")])],1)],1)],1)],1)],1),s("v-card-actions",[s("v-btn",{attrs:{color:"primary",disabled:!t.transaction.cards.areUnequal},on:{click:t.checkIfCardsEqual}},[t._v(" Continue ")]),s("v-btn",{attrs:{text:""},on:{click:function(e){t.stepNum=2}}},[t._v("Back")])],1)],1)],1),s("v-stepper-content",{attrs:{step:"4"}},[s("v-card",[s("v-card-text",[s("p",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Sender card: ")]),t.processes.transaction.good?t._e():s("span",{staticClass:"subtitle-1"},[t._v(" "+t._s(t.cards[t.sender_card_num]?t.cards[t.sender_card_num].card_number:"Cannot get card number")+" ")])]),s("p",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Receiver card: ")]),s("span",{staticClass:"subtitle-1"},[t._v(" "+t._s(t.transaction.data.receiver_card)+" ")])]),s("p",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Sum: ")]),s("span",{staticClass:"subtitle-1"},[t._v(" "+t._s(t.transaction.data.sum)+" ")])]),""!=t.transaction.data.description?s("p",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Description: ")]),s("br"),s("span",{staticClass:"body-1"},[t._v(" "+t._s(t.transaction.data.description)+" ")])]):t._e(),s("v-scroll-x-transition",[t.processes.transaction.failed?s("p",[s("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" "+t._s(t.processes.transaction.details)+" ")])],1):t._e()]),s("v-scroll-x-transition",[t.processes.transaction.good?s("p",[s("v-alert",{attrs:{dense:"",outlined:"",type:"success"}},[t._v(" "+t._s(t.processes.transaction.details)+" ")])],1):t._e()]),s("v-scroll-x-transition",[t.processes.transaction.bad?s("p",[s("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" "+t._s(t.processes.transaction.details)+" ")])],1):t._e()])],1),s("v-card-actions",[s("v-btn",{attrs:{color:"primary",loading:t.processes.transaction.active,disabled:t.processes.transaction.good},on:{click:t.makeTransaction}},[t._v(" Submit ")]),s("v-btn",{attrs:{text:"",disabled:t.processes.transaction.good||t.processes.transaction.active},on:{click:function(e){t.stepNum=3}}},[t._v("Back")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],2)},It=[],$t=(s("a4d3"),s("e01a"),s("26e9"),s("acd8"),s("4d90"),{components:{appTransaction:Vt},data:function(){return{showMakeTransactionDialog:!1,stepNum:0,inputValid:{card:{isValid:!0,rules:[function(t){return t&&/^[0-9]+$/.test(t)||"Card must contain digits only"},function(t){return t&&16===t.length||"Card must be 16 numbers long"}]},money:{isValid:!0,rules:[function(t){return t>0||"The amount of oney to send cannot be less than 0 or equal to 0"}]},sender_balance:{isValid:!0}},transaction:{data:{receiver_card:"",sender_card:"",sum:"",description:"",target_endpoint:"/api/make_transaction"},cards:{areUnequal:!0}},processes:{transaction:{active:!1,bad:!1,good:!1,failed:!1,details:"",error:""},fetchTransactions:{active:!1,failed:!1,details:""},fetchCards:{active:!1,failed:!1,details:""}},sender_card_num:0}},methods:{makeTransaction:function(){var t=this;this.processes.transaction.active=!0,this.transaction.data.sender_card=this.cards[this.sender_card_num].card_number;var e=new Date,s=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear(),i=e.getHours(),n=e.getMinutes(),o=e.getSeconds(),c=["Mon","Tue","Wed","Thur","Fri","Sat","Sun"][e.getDay()];e="".concat(c," ").concat(s,".").concat(a,".").concat(r," ").concat(i,":").concat(n,":").concat(o),this.transaction.data.date=e,this.$store.dispatch("performTransaction",Object.assign({},this.transaction.data)).then((function(e){e.status===I().finished.pos?(t.processes.transaction.active=!1,t.processes.transaction.bad=!1,t.processes.transaction.failed=!1,t.processes.transaction.good=!0,t.processes.transaction.details=e.details,t.transaction.data.receiver_card="",t.transaction.data.sum="",t.transaction.data.description="",setTimeout((function(){t.showMakeTransactionDialog=!1,t.stepNum=0,t.processes.transaction.good=!1}),1e3)):(t.processes.transaction.active=!1,t.processes.transaction.bad=!0,t.processes.transaction.failed=!1,t.processes.transaction.good=!1,t.processes.transaction.details=e.details)}),(function(e){t.processes.transaction.bad=!1,t.processes.transaction.active=!1,t.processes.transaction.good=!1,t.processes.transaction.failed=!0,t.processes.transaction.details=e.details,t.processes.transaction.error=e.error}))},checkBalance:function(){parseFloat(this.cards[this.sender_card_num].card_balance)>=this.transaction.data.sum?(this.inputValid.sender_balance.isValid=!0,this.stepNum=3):this.inputValid.sender_balance.isValid=!1},checkIfCardsEqual:function(){this.cards[this.sender_card_num].card_number===this.transaction.data.receiver_card?this.transaction.cards.areUnequal=!1:(this.transaction.cards.areUnequal=!0,this.stepNum=4)}},computed:{cards:function(){return this.$store.getters.getCards},transactions:function(){var t=this.$store.getters.getTransactions;return t.reverse()}},beforeRouteEnter:function(t,e,s){s((function(t){var e=t;e.processes.fetchTransactions.active=!0,e.$store.dispatch("fetchTransactions").then((function(t){e.processes.fetchTransactions.active=!1,e.processes.fetchTransactions.failed=!1,e.processes.fetchTransactions.details=t.details}),(function(t){e.processes.fetchTransactions.active=!1,e.processes.fetchTransactions.failed=!0,e.processes.fetchTransactions.details=t.details}))}))}}),Nt=$t,Ot=s("ce7e"),qt=s("7e85"),jt=s("e516"),Lt=s("9c54"),Ft=s("56a4"),Qt=s("a844"),Bt=Object(d["a"])(Nt,Pt,It,!1,null,null,null),Mt=Bt.exports;u()(Bt,{VAlert:O["a"],VBtn:C["a"],VCard:j["a"],VCardActions:L["a"],VCardText:L["b"],VCardTitle:L["c"],VCol:x["a"],VContainer:y["a"],VDialog:Q["a"],VDivider:Ot["a"],VForm:M["a"],VList:J["a"],VListItem:H["a"],VListItemContent:X["a"],VListItemGroup:Y["a"],VListItemTitle:X["b"],VProgressCircular:St["a"],VRow:E["a"],VScrollXTransition:v["d"],VSlideXTransition:v["e"],VSpacer:K["a"],VStepper:qt["a"],VStepperContent:jt["a"],VStepperHeader:Lt["a"],VStepperItems:Lt["b"],VStepperStep:Ft["a"],VSubheader:tt["a"],VTextField:et["a"],VTextarea:Qt["a"]});var zt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.processes.fetchTemplates.active||t.processes.fetchTemplates.failed?t.processes.fetchTemplates.active?s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"info"}},[t._v(" Fetching templates from the server. Please wait. "),s("div",{staticClass:"text-right mt-2"},[s("v-progress-circular",{attrs:{indeterminate:"",color:"white"}})],1)])],1)],1):t.processes.fetchTemplates.failed?s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"error"}},[t._v(" Failed to fetch templates from the server. ")])],1)],1):t._e():s("v-row",[t._l(t.templates,(function(t,e){return s("v-col",{key:e,attrs:{cols:"12"}},[s("app-template",{attrs:{template_data:t}})],1)})),s("v-col",{attrs:{cols:"12"}},[s("v-dialog",{attrs:{persistent:"","max-width":"800px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[t.cards.length>0?s("v-btn",t._g({attrs:{block:"",color:"primary",dark:""}},a),[t._v("Create Template")]):t._e(),0==t.cards.length?s("div",{staticClass:"text-center"},[s("v-alert",{attrs:{type:"info"}},[t._v(" To create a template you need at least one card created. ")])],1):t._e()]}}],null,!1,3494881350),model:{value:t.showCreationDialog,callback:function(e){t.showCreationDialog=e},expression:"showCreationDialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[t._v("Create a Template")])]),s("v-card-text",[s("v-stepper",{model:{value:t.formStep,callback:function(e){t.formStep=e},expression:"formStep"}},[s("v-stepper-header",[s("v-stepper-step",{attrs:{complete:t.formStep>1,step:"1"}},[t._v("Sender card")]),s("v-divider"),s("v-stepper-step",{attrs:{complete:t.formStep>2,step:"2"}},[t._v("Money and description")]),s("v-divider"),s("v-stepper-step",{attrs:{complete:t.formStep>3,step:"3"}},[t._v("Receiver card")]),s("v-divider"),s("v-stepper-step",{attrs:{step:"4"}},[t._v("Confirmation")])],1),s("v-stepper-items",[s("v-stepper-content",{attrs:{step:"1"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[t._v("Pick a Card")]),s("v-card-text",[s("v-list",[s("v-subheader",[t._v("Pick a card to draw money from")]),s("v-list-item-group",{attrs:{color:"primary"},model:{value:t.sender_card_num,callback:function(e){t.sender_card_num=e},expression:"sender_card_num"}},t._l(t.cards,(function(e,a){return s("v-list-item",{key:a},[s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s(e.card_number)}})],1)],1)})),1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"primary darken-1"},on:{click:function(e){t.formStep=2}}},[t._v("Confirm")]),s("v-btn",{attrs:{color:"primary darken-1",outlined:""},on:{click:function(e){t.showCreationDialog=!1}}},[t._v("Cancel")])],1)],1)],1),s("v-stepper-content",{attrs:{step:"2"}},[s("v-card",[s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-form",{model:{value:t.inputValid.money.isValid,callback:function(e){t.$set(t.inputValid.money,"isValid",e)},expression:"inputValid.money.isValid"}},[s("v-text-field",{attrs:{label:"Amount of money",type:"number",required:"",rules:t.inputValid.money.rules},model:{value:t.template.data.sum,callback:function(e){t.$set(t.template.data,"sum",e)},expression:"template.data.sum"}})],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-textarea",{attrs:{"auto-grow":"",solo:"",outlined:"",label:"Description (optional)"},model:{value:t.template.data.description,callback:function(e){t.$set(t.template.data,"description",e)},expression:"template.data.description"}})],1)],1)],1)],1),s("v-card-actions",[s("v-btn",{attrs:{color:"primary",disabled:!t.inputValid.money.isValid},on:{click:function(e){t.formStep=3}}},[t._v(" Continue ")]),s("v-btn",{attrs:{text:""},on:{click:function(e){t.formStep=1}}},[t._v("Back")])],1)],1)],1),s("v-stepper-content",{attrs:{step:"3"}},[s("v-card",[s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-form",{model:{value:t.inputValid.card.isValid,callback:function(e){t.$set(t.inputValid.card,"isValid",e)},expression:"inputValid.card.isValid"}},[s("v-text-field",{attrs:{label:"Receiver card number",type:"text",required:"",rules:t.inputValid.card.rules,counter:16},model:{value:t.template.data.receiver_card,callback:function(e){t.$set(t.template.data,"receiver_card",e)},expression:"template.data.receiver_card"}})],1)],1),s("v-slide-x-transition",[t.template.cards.areUnequal?t._e():s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"error"}},[t._v(" Sender and receiver cards cannot be equal. ")])],1)],1)],1)],1)],1),s("v-card-actions",[s("v-btn",{attrs:{color:"primary",disabled:!t.inputValid.card.isValid},on:{click:t.checkIfCardsEqual}},[t._v(" Continue ")]),s("v-btn",{attrs:{text:""},on:{click:function(e){t.formStep=2}}},[t._v("Back")])],1)],1)],1),s("v-stepper-content",{attrs:{step:"4"}},[s("v-card",[s("v-card-text",[s("p",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Sender card: ")]),t.cards[t.sender_card_num]&&t.cards[t.sender_card_num].card_number?s("span",{staticClass:"subtitle-1"},[t._v(" "+t._s(t.cards[t.sender_card_num].card_number)+" ")]):t._e()]),s("br"),s("p",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Receiver card: ")]),s("span",{staticClass:"subtitle-1"},[t._v(" "+t._s(t.template.data.receiver_card)+" ")])]),s("p",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Sum: ")]),s("span",{staticClass:"subtitle-1"},[t._v(" "+t._s(t.template.data.sum)+" ")])]),""!=t.template.data.description?s("p",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Description: ")]),s("br"),s("span",{staticClass:"body-1"},[t._v(" "+t._s(t.template.data.description)+" ")])]):t._e(),s("v-scroll-x-transition",[t.processes.creating_template.failed?s("p",[s("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" "+t._s(t.processes.creating_template.details)+" ")])],1):t._e()]),s("v-scroll-x-transition",[t.processes.creating_template.good?s("p",[s("v-alert",{attrs:{dense:"",outlined:"",type:"success"}},[t._v(" "+t._s(t.processes.creating_template.details)+" ")])],1):t._e()]),s("v-scroll-x-transition",[t.processes.creating_template.bad?s("p",[s("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" "+t._s(t.processes.creating_template.details)+" ")])],1):t._e()])],1),s("v-card-actions",[s("v-btn",{attrs:{color:"primary",disabled:t.processes.creating_template.good,loading:t.processes.creating_template.active},on:{click:t.addTemplate}},[t._v(" Submit ")]),s("v-btn",{attrs:{text:"",disabled:t.processes.creating_template.good||t.processes.creating_template.active},on:{click:function(e){t.formStep=3}}},[t._v("Back")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],2)},Wt=[],Jt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"user-template",attrs:{outlined:""}},[s("v-card-text",[s("p",{staticClass:"text--primary subtitle-1"},[t._v(" Sender: "),s("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t._f("formatCardNumWithMask")(t.template_data.sender_card))+" ")])]),s("p",{staticClass:"text--primary subtitle-1"},[t._v(" Receiver: "),s("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t._f("formatCardNumWithMask")(t.template_data.receiver_card))+" ")])]),s("p",{staticClass:"text--primary subtitle-1"},[t._v(" Sum: "),s("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t.template_data.sum)+" ")])]),""!=t.template_data.description?s("v-expansion-panels",[s("v-expansion-panel",{staticClass:"description"},[s("v-expansion-panel-header",{staticClass:"font-weight-medium description-title"},[t._v("Description")]),s("v-expansion-panel-content",{staticClass:"subtitle-1"},[t._v(" "+t._s(t.template_data.description)+" ")])],1)],1):t._e()],1),s("v-card-actions",[s("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-spacer"),s("v-btn",t._g({attrs:{color:"primary",dark:""}},a),[t._v("Make Transaction")])]}}]),model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[s("v-card",{staticClass:"cofirmation-dialog"},[s("v-card-text",[s("v-container",{attrs:{fluid:""}},[s("v-row",[s("v-col",{staticClass:"headline light-blue--text text--darken-3",attrs:{cols:"12"}},[t._v(" Transaction summary ")]),s("v-col",{attrs:{cols:"12"}},[s("span",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Sender card: ")]),s("span",{staticClass:"subtitle-1"},[t._v(" "+t._s(t.template_data.sender_card)+" ")])])]),s("v-col",{attrs:{cols:"12"}},[s("span",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Receiver card: ")]),s("span",{staticClass:"subtitle-1"},[t._v(" "+t._s(t.template_data.receiver_card)+" ")])])]),s("v-col",{attrs:{cols:"12"}},[s("span",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Sum: ")]),s("span",{staticClass:"subtitle-1"},[t._v(" "+t._s(t.template_data.sum)+" ")])])]),s("v-col",{attrs:{cols:"12"}},[s("span",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Description: ")]),s("br"),s("span",{staticClass:"body-1"},[t._v(" "+t._s(t.template_data.description)+" ")])])]),s("v-scroll-x-transition",[t.processes.transaction.failed?s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" "+t._s(t.processes.transaction.details)+" ")])],1):t._e()],1),s("v-scroll-x-transition",[t.balanceIsValid?t._e():s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" Not enough money on the card to perform the transaction. ")])],1)],1),s("v-scroll-x-transition",[t.processes.transaction.good?s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{dense:"",outlined:"",type:"success"}},[t._v(" "+t._s(t.processes.transaction.details)+" ")])],1):t._e()],1),s("v-scroll-x-transition",[t.processes.transaction.bad?s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" "+t._s(t.processes.transaction.details)+" ")])],1):t._e()],1),s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{color:"primary",loading:t.processes.transaction.active,disabled:t.processes.transaction.good},on:{click:t.performTransaction}},[t._v(" Submit ")]),s("v-btn",{staticClass:"ml-3",attrs:{outlined:"",color:"primary",disabled:t.processes.transaction.good||t.processes.transaction.active},on:{click:function(e){t.showDialog=!1}}},[t._v("Cancel ")])],1)],1)],1)],1)],1)],1)],1)],1)},Ht=[],Xt={data:function(){return{showDialog:!1,processes:{transaction:{active:!1,bad:!1,good:!1,failed:!1,details:"",error:""}},balanceIsValid:!0}},props:{template_data:{type:Object,required:!0}},computed:{cards:function(){return this.$store.getters.getCards}},methods:{performTransaction:function(){for(var t=this,e=0;e<this.cards.lengthl;e+=1)if(this.cards[e].card_number===this.template_data.sender_card&&this.cards[e].card_balance<this.template_data.sum){this.balanceIsValid=!1;break}if(this.balanceIsValid){var s=Object.assign({},this.template_data);s.target_endpoint="/api/make_transaction",this.processes.transaction.active=!0,this.$store.dispatch("performTransaction",Object.assign({},s)).then((function(e){e.status===I().finished.pos?(t.processes.transaction.active=!1,t.processes.transaction.bad=!1,t.processes.transaction.failed=!1,t.processes.transaction.good=!0,t.processes.transaction.details=e.details,setTimeout((function(){t.showDialog=!1,t.processes.transaction.good=!1}),1e3)):(t.processes.transaction.active=!1,t.processes.transaction.bad=!0,t.processes.transaction.failed=!1,t.processes.transaction.good=!1,t.processes.transaction.details=e.details)}),(function(e){t.processes.transaction.bad=!1,t.processes.transaction.active=!1,t.processes.transaction.failed=!0,t.processes.transaction.details=e.details,t.processes.transaction.error=e.error}))}}}},Yt=Xt,Gt=(s("e058"),Object(d["a"])(Yt,Jt,Ht,!1,null,null,null)),Zt=Gt.exports;u()(Gt,{VAlert:O["a"],VBtn:C["a"],VCard:j["a"],VCardActions:L["a"],VCardText:L["b"],VCol:x["a"],VContainer:y["a"],VDialog:Q["a"],VExpansionPanel:ft["a"],VExpansionPanelContent:ht["a"],VExpansionPanelHeader:gt["a"],VExpansionPanels:bt["a"],VRow:E["a"],VScrollXTransition:v["d"],VSpacer:K["a"]});var Kt={components:{appTemplate:Zt},data:function(){return{showCreationDialog:!1,formStep:0,inputValid:{card:{isValid:!0,rules:[function(t){return t&&/^[0-9]+$/.test(t)||"Card must contain digits only"},function(t){return t&&16===t.length||"Card must be 16 numbers long"}]},money:{isValid:!0,rules:[function(t){return t>0||"The amount of oney to send cannot be less than 0 or equal to 0"}]},sender_balance:{isValid:!0}},template:{data:{sender_card:"",receiver_card:"",sum:"",description:""},cards:{areUnequal:!0}},processes:{creating_template:{active:!1,bad:!1,good:!1,failed:!1,details:"",error:""},fetchTemplates:{active:!1,failed:!1,details:""},fetchCards:{active:!1,failed:!1,details:""}},sender_card_num:0}},computed:{cards:function(){return this.$store.getters.getCards},templates:function(){return this.$store.getters.getTemplates}},methods:{addTemplate:function(){var t=this;this.template.data.sender_card=this.cards[this.sender_card_num].card_number,this.processes.creating_template.active=!0,this.$store.dispatch("addTemplate",Object.assign({},this.template.data)).then((function(e){e.status===I().finished.pos?(t.processes.creating_template.active=!1,t.processes.creating_template.bad=!1,t.processes.creating_template.failed=!1,t.processes.creating_template.good=!0,t.processes.creating_template.details=e.details,t.template.data.receiver_card="",t.template.data.sum="",t.template.data.description="",setTimeout((function(){t.showCreationDialog=!1,t.formStep=0,t.processes.creating_template.good=!1}),1e3)):(t.processes.creating_template.active=!1,t.processes.creating_template.bad=!0,t.processes.creating_template.failed=!1,t.processes.creating_template.good=!1,t.processes.creating_template.details=e.details)}),(function(e){t.processes.creating_template.active=!1,t.processes.creating_template.bad=!1,t.processes.creating_template.failed=!0,t.processes.creating_template.good=!1,t.processes.creating_template.error=e.error,t.processes.creating_template.details=e.details}))},checkBalance:function(){parseFloat(this.cards[this.sender_card_num].card_balance)>=this.template.data.sum?this.inputValid.sender_balance.isValid=!0:this.inputValid.sender_balance.isValid=!1},checkIfCardsEqual:function(){this.cards[this.sender_card_num].card_number===this.template.data.receiver_card?this.template.cards.areUnequal=!1:(this.template.cards.areUnequal=!0,this.formStep=4)}},beforeRouteEnter:function(t,e,s){s((function(t){var e=t;e.processes.fetchTemplates.active=!0,e.$store.dispatch("fetchTemplates").then((function(t){e.processes.fetchTemplates.active=!1,e.processes.fetchTemplates.failed=!1,e.processes.fetchTemplates.details=t.details}),(function(t){e.processes.fetchTemplates.active=!1,e.processes.fetchTemplates.failed=!0,e.processes.fetchTemplates.details=t.details}))}))}},te=Kt,ee=Object(d["a"])(te,zt,Wt,!1,null,null,null),se=ee.exports;u()(ee,{VAlert:O["a"],VBtn:C["a"],VCard:j["a"],VCardActions:L["a"],VCardText:L["b"],VCardTitle:L["c"],VCol:x["a"],VContainer:y["a"],VDialog:Q["a"],VDivider:Ot["a"],VForm:M["a"],VList:J["a"],VListItem:H["a"],VListItemContent:X["a"],VListItemGroup:Y["a"],VListItemTitle:X["b"],VProgressCircular:St["a"],VRow:E["a"],VScrollXTransition:v["d"],VSlideXTransition:v["e"],VSpacer:K["a"],VStepper:qt["a"],VStepperContent:jt["a"],VStepperHeader:Lt["a"],VStepperItems:Lt["b"],VStepperStep:Ft["a"],VSubheader:tt["a"],VTextField:et["a"],VTextarea:Qt["a"]});var ae=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.processes.fetchDeposits.active||t.processes.fetchCards.active||t.processes.fetchDeposits.failed||t.processes.fetchCards.failed?t.processes.fetchCards.active||t.processes.fetchDeposits.active?s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"info"}},[t._v(" Fetching deposits from the server. Please wait. "),s("div",{staticClass:"text-right mt-2"},[s("v-progress-circular",{attrs:{indeterminate:"",color:"white"}})],1)])],1)],1):t.processes.fetchCards.failed||t.processes.fetchDeposits.failed?s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"error"}},[t._v(" Failed to fetch deposits from the server. ")])],1)],1):t._e():s("v-row",[t._l(t.deposits,(function(t,e){return s("v-col",{key:e,attrs:{cols:"12"}},[s("app-deposit",{attrs:{deposit_data:t}})],1)})),s("v-col",{attrs:{cols:"12"}},[s("v-dialog",{attrs:{persistent:"","max-width":"800px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[t.cards.length>0&&t.deposits.length<1?s("v-btn",t._g({attrs:{color:"primary",block:""}},a),[t._v("Create Deposit")]):t._e(),0==t.cards.length?s("div",{staticClass:"text-center"},[s("v-alert",{attrs:{type:"info"}},[t._v(" To make make a deposit you need at least one card created. ")])],1):t._e()]}}],null,!1,2496107124),model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[s("v-stepper",{model:{value:t.formStep,callback:function(e){t.formStep=e},expression:"formStep"}},[s("v-stepper-header",[s("v-stepper-step",{attrs:{complete:t.formStep>1,step:"1"}},[t._v("Card to bind deposit to")]),s("v-divider"),s("v-stepper-step",{attrs:{complete:t.formStep>2,step:"2"}},[t._v("Initial sum")]),s("v-divider"),s("v-stepper-step",{attrs:{complete:t.formStep>3,step:"3"}},[t._v("End date")]),s("v-divider"),s("v-stepper-step",{attrs:{step:"4"}},[t._v("Confirmation")])],1),s("v-stepper-items",[s("v-stepper-content",{attrs:{step:"1"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[t._v("Pick a Card")]),s("v-card-text",[s("v-list",[s("v-subheader",[t._v("Pick a card to bind deposit to")]),s("v-list-item-group",{attrs:{color:"primary"},model:{value:t.deposit_card_num,callback:function(e){t.deposit_card_num=e},expression:"deposit_card_num"}},t._l(t.cards,(function(e,a){return s("v-list-item",{key:a},[s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s(e.card_number)}})],1)],1)})),1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"primary darken-1"},on:{click:function(e){t.formStep=2}}},[t._v("Confirm")]),s("v-btn",{attrs:{color:"primary darken-1",outlined:""},on:{click:function(e){t.showDialog=!1}}},[t._v("Cancel")])],1)],1)],1),s("v-stepper-content",{attrs:{step:"2"}},[s("v-card",[s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-form",{model:{value:t.inputValid.money.isValid,callback:function(e){t.$set(t.inputValid.money,"isValid",e)},expression:"inputValid.money.isValid"}},[s("v-text-field",{attrs:{label:"Initial sum",type:"number",required:"",rules:t.inputValid.money.rules},model:{value:t.deposit.data.init_sum,callback:function(e){t.$set(t.deposit.data,"init_sum",e)},expression:"deposit.data.init_sum"}})],1)],1),s("v-slide-x-transition",[t.inputValid.deposit_card_balance.isValid?t._e():s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"error"}},[t._v(" Your previosly selected card doesn't have enough money. ")])],1)],1)],1)],1)],1),s("v-card-actions",[s("v-btn",{attrs:{color:"primary",disabled:!t.inputValid.money.isValid},on:{click:t.checkBalance}},[t._v(" Continue ")]),s("v-btn",{attrs:{text:""},on:{click:function(e){t.formStep=1}}},[t._v("Back")])],1)],1)],1),s("v-stepper-content",{attrs:{step:"3"}},[s("v-card",[s("v-card-text",[s("v-container",[s("v-row",{attrs:{justify:"center"}},[s("v-date-picker",{attrs:{min:t.today,landscape:"",color:"primary"},model:{value:t.deposit.data.end_date,callback:function(e){t.$set(t.deposit.data,"end_date",e)},expression:"deposit.data.end_date"}}),t.processes.getIncome.failed?s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{type:"error"}},[t._v("Failed to calculate income")])],1):t._e()],1)],1)],1),s("v-card-actions",[s("v-btn",{attrs:{color:"primary",disabled:""===!t.deposit.data.end_date,loading:t.processes.getIncome.active},on:{click:t.calculateIncome}},[t._v(" Continue ")]),s("v-btn",{attrs:{text:"",disabled:t.processes.getIncome.active},on:{click:function(e){t.formStep=2}}},[t._v("Back")])],1)],1)],1),s("v-stepper-content",{attrs:{step:"4"}},[s("v-card",[s("v-card-text",[s("p",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Card to bind deposit to: ")]),t.cards[t.deposit_card_num]&&t.cards[t.deposit_card_num].card_number?s("span",{staticClass:"subtitle-1"},[t._v(" "+t._s(t._f("formatCardNum")(t.cards[t.deposit_card_num].card_number))+" ")]):t._e()]),s("p",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Initial sum: ")]),s("span",{staticClass:"subtitle-1"},[t._v(" "+t._s(t.deposit.data.init_sum)+" ")])]),s("p",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" End date: ")]),s("span",{staticClass:"body-1"},[t._v(" "+t._s(t.deposit.data.end_date.split("-").reverse().join("."))+" ")])]),s("p",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Expected income: ")]),s("span",{staticClass:"body-1"},[t._v(" "+t._s(this.income)+" ")])]),s("v-scroll-x-transition",[t.processes.create_deposit.failed?s("p",[s("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" "+t._s(t.processes.create_deposit.details)+" ")])],1):t._e()]),s("v-scroll-x-transition",[t.processes.create_deposit.good?s("p",[s("v-alert",{attrs:{dense:"",outlined:"",type:"success"}},[t._v(" "+t._s(t.processes.create_deposit.details)+" ")])],1):t._e()])],1),s("v-card-actions",[s("v-btn",{attrs:{color:"primary",loading:t.processes.create_deposit.active,disabled:t.processes.create_deposit.good},on:{click:t.createDeposit}},[t._v(" Submit ")]),s("v-btn",{attrs:{text:"",disabled:t.processes.create_deposit.good||t.processes.create_deposit.active},on:{click:function(e){t.formStep=3}}},[t._v("Back")])],1)],1)],1)],1)],1)],1)],1)],2)},re=[],ie=(s("a15b"),s("1276"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"user-deposit",attrs:{otlined:""}},[s("v-card-text",[t.deposit_data&&t.deposit_data.card_num?s("p",{staticClass:"text--primary subtitle-1"},[t._v(" Card number: "),s("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t._f("formatCardNum")(t.deposit_data.card_num))+" ")])]):t._e(),s("p",{staticClass:"text--primary subtitle-1"},[t._v(" Balance: "),s("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t.deposit_data.init_sum)+" ")])]),s("p",{staticClass:"text--primary subtitle-1"},[t._v(" Start date: "),s("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t.deposit_data.start_date)+" ")])]),s("p",{staticClass:"text--primary subtitle-1"},[t._v(" Expiration date: "),s("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t.deposit_data.end_date)+" ")])])])],1)}),ne=[],oe={props:{deposit_data:{type:Object,required:!0}}},ce=oe,le=(s("d5a8"),Object(d["a"])(ce,ie,ne,!1,null,null,null)),de=le.exports;u()(le,{VCard:j["a"],VCardText:L["b"]});var pe={data:function(){return{formStep:0,showDialog:!1,deposit_card_num:0,income:0,processes:{create_deposit:{active:!1,good:!1,bad:!1,failed:!1,details:"",error:""},fetchDeposits:{active:!1,failed:!1,details:""},fetchCards:{active:!1,failed:!1,details:""},getIncome:{active:!1,failed:!1,details:""}},inputValid:{money:{isValid:!0,rules:[function(t){return t>0||"The amount of oney to send cannot be less than 0 or equal to 0"}]},deposit_card_balance:{isValid:!0}},deposit:{data:{card_num:"",init_sum:0,end_date:""}}}},methods:{checkBalance:function(){parseFloat(this.cards[this.deposit_card_num].card_balance)>=this.deposit.data.init_sum?(this.inputValid.deposit_card_balance.isValid=!0,this.formStep=3):this.inputValid.deposit_card_balance.isValid=!1},calculateIncome:function(){var t=this,e=this.deposit.data.end_date.split("-").reverse().join(".");this.processes.getIncome.active=!0,this.$store.dispatch("calculateIncome",{sum:this.deposit.data.init_sum,exp_date:e}).then((function(e){t.processes.getIncome.active=!1,t.income=e,t.formStep=4}),(function(e){t.processes.getIncome.active=!1,t.processes.getIncome.failed=!0,t.processes.getIncome.details=e.details}))},createDeposit:function(){var t=this,e=Object.assign({},this.deposit.data);e.start_date=this.today.split("-").reverse().join("."),e.card_num=this.cards[this.deposit_card_num].card_number,e.end_date=this.deposit.data.end_date.split("-").reverse().join("."),this.processes.create_deposit.active=!0,this.$store.dispatch("createDeposit",Object.assign({},e)).then((function(e){t.processes.create_deposit.active=!1,t.processes.create_deposit.bad=!1,t.processes.create_deposit.failed=!1,t.processes.create_deposit.good=!0,t.processes.create_deposit.details=e.details,t.deposit.data.card_num="",t.deposit.data.init_sum="",t.deposit.data.end_date="",setTimeout((function(){t.showDialog=!1,t.processes.create_deposit.good=!1}),1e3)}),(function(e){t.processes.create_deposit.active=!1,t.processes.create_deposit.bad=!1,t.processes.create_deposit.failed=!0,t.processes.create_deposit.good=!1,t.processes.create_deposit.error=e.error,t.processes.create_deposit.details=e.details}))}},components:{appDeposit:de},computed:{deposits:function(){return this.$store.getters.getDeposits},cards:function(){return this.$store.getters.getCards},today:function(){var t=new Date,e=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear();return"".concat(a,"-").concat(s,"-").concat(e)}},beforeRouteEnter:function(t,e,s){s((function(t){var e=t;e.processes.fetchDeposits.active=!0,e.$store.dispatch("fetchDeposits").then((function(t){e.processes.fetchDeposits.active=!1,e.processes.fetchDeposits.failed=!1,e.processes.fetchDeposits.details=t.details}),(function(t){e.processes.fetchDeposits.failed=!0,e.processes.fetchDeposits.active=!1,e.processes.fetchDeposits.details=t.details}))}))}},ue=pe,ve=s("2e4b"),me=Object(d["a"])(ue,ae,re,!1,null,null,null),_e=me.exports;u()(me,{VAlert:O["a"],VBtn:C["a"],VCard:j["a"],VCardActions:L["a"],VCardText:L["b"],VCardTitle:L["c"],VCol:x["a"],VContainer:y["a"],VDatePicker:ve["a"],VDialog:Q["a"],VDivider:Ot["a"],VForm:M["a"],VList:J["a"],VListItem:H["a"],VListItemContent:X["a"],VListItemGroup:Y["a"],VListItemTitle:X["b"],VProgressCircular:St["a"],VRow:E["a"],VScrollXTransition:v["d"],VSlideXTransition:v["e"],VSpacer:K["a"],VStepper:qt["a"],VStepperContent:jt["a"],VStepperHeader:Lt["a"],VStepperItems:Lt["b"],VStepperStep:Ft["a"],VSubheader:tt["a"],VTextField:et["a"]});var fe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{staticClass:"app-terminal"},[s("v-app-bar",{attrs:{app:"",flat:""}},[s("v-toolbar-title",[s("router-link",{staticClass:"header-title",attrs:{to:"/terminal",tag:"span"}},[t._v(" Berking ")]),s("v-chip",{attrs:{color:"primary",small:""}},[t._v(" beta ")])],1)],1),s("v-content",[s("router-view")],1)],1)},he=[],ge=(s("a243"),{}),be=Object(d["a"])(ge,fe,he,!1,null,null,null),we=be.exports;u()(be,{VApp:V["a"],VAppBar:T["a"],VChip:S["a"],VContent:k["a"],VToolbarTitle:D["a"]});var Ve=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticClass:"full-height terminalHome-container",attrs:{fluid:""}},[s("v-row",{staticClass:"full-height"},[s("v-col",{staticClass:"half-height mt-12 terminal-options",attrs:{cols:"12"}},[s("p",{staticClass:"text-center mb-12 title"},[t._v(" What do you want to do ? ")]),s("v-btn",{staticClass:"quarter-height btn-replenish",attrs:{color:"primary",block:"",to:"terminal/replenish"}},[t._v(" Replenish Card ")]),s("v-btn",{staticClass:"quarter-height mt-12 btn-replenish",attrs:{color:"primary",block:"",outlined:"",to:"/"}},[t._v(" Back ")])],1)],1)],1)},Te=[],Ce={},Se=Ce,xe=(s("7b48"),Object(d["a"])(Se,Ve,Te,!1,null,null,null)),ye=xe.exports;u()(xe,{VBtn:C["a"],VCol:x["a"],VContainer:y["a"],VRow:E["a"]});var ke=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticClass:"terminalReplenish-container"},[s("v-stepper",{model:{value:t.stepNum,callback:function(e){t.stepNum=e},expression:"stepNum"}},[s("v-stepper-header",[s("v-stepper-step",{attrs:{complete:t.stepNum>1,step:"1"}},[t._v(" Card number ")]),s("v-divider"),s("v-stepper-step",{attrs:{complete:t.stepNum>2,step:"2"}},[t._v(" Money and description ")]),s("v-divider"),s("v-stepper-step",{attrs:{complete:t.stepNum>3,step:"3"}},[t._v(" Payment validation ")])],1),s("v-stepper-items",[s("v-stepper-content",{attrs:{step:"1"}},[s("v-form",{model:{value:t.inputValid.card.isValid,callback:function(e){t.$set(t.inputValid.card,"isValid",e)},expression:"inputValid.card.isValid"}},[s("v-text-field",{attrs:{rules:t.inputValid.card.rules,outlined:"",counter:16,"single-line":"",label:"Card Number"},model:{value:t.transaction.data.receiver_card,callback:function(e){t.$set(t.transaction.data,"receiver_card",e)},expression:"transaction.data.receiver_card"}})],1),s("v-btn",{staticClass:"mr-3",attrs:{color:"primary",disabled:!t.inputValid.card.isValid},on:{click:function(e){t.stepNum=2}}},[t._v(" Continue ")]),s("v-btn",{attrs:{color:"primary",outlined:"",to:"/terminal"}},[t._v("Cancel")])],1),s("v-stepper-content",{attrs:{step:"2"}},[s("v-form",{model:{value:t.inputValid.money.isValid,callback:function(e){t.$set(t.inputValid.money,"isValid",e)},expression:"inputValid.money.isValid"}},[s("v-text-field",{attrs:{outlined:"","single-line":"",type:"number",label:"Amount of money",rules:t.inputValid.money.rules},model:{value:t.transaction.data.sum,callback:function(e){t.$set(t.transaction.data,"sum",e)},expression:"transaction.data.sum"}})],1),s("v-textarea",{attrs:{"auto-grow":"",solo:"",outlined:"",label:"Payment description (optional)"},model:{value:t.transaction.data.description,callback:function(e){t.$set(t.transaction.data,"description",e)},expression:"transaction.data.description"}}),s("v-btn",{staticClass:"mr-3",attrs:{color:"primary",disabled:!t.inputValid.money.isValid},on:{click:function(e){t.stepNum=3}}},[t._v(" Continue ")]),s("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(e){t.stepNum=1}}},[t._v("Back")])],1),s("v-stepper-content",{attrs:{step:"3"}},[s("v-card",[s("v-card-text",[s("p",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Receiver card: ")]),s("span",{staticClass:"subtitle-1"},[t._v(" "+t._s(t._f("formatCardNum")(t.transaction.data.receiver_card))+" ")])]),s("p",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Sum: ")]),s("span",{staticClass:"subtitle-1"},[t._v(" "+t._s(t.transaction.data.sum)+" ")])]),""!=t.transaction.data.description?s("p",{staticClass:"text--primary"},[s("span",{staticClass:"font-weight-medium title"},[t._v(" Description: ")]),s("br"),s("span",{staticClass:"body-1"},[t._v(" "+t._s(t.transaction.data.description)+" ")])]):t._e(),s("v-scroll-x-transition",[t.processes.transaction.failed?s("p",[s("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" "+t._s(t.processes.transaction.details)+" ")])],1):t._e()]),s("v-scroll-x-transition",[t.processes.transaction.good?s("p",[s("v-alert",{attrs:{dense:"",outlined:"",type:"success"}},[t._v(" "+t._s(t.processes.transaction.details)+" ")])],1):t._e()]),s("v-scroll-x-transition",[t.processes.transaction.bad?s("p",[s("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" "+t._s(t.processes.transaction.details)+" ")])],1):t._e()])],1),s("v-card-actions",[s("v-btn",{attrs:{color:"primary",loading:t.processes.transaction.active,disabled:t.processes.transaction.good},on:{click:t.makeTransaction}},[t._v(" Submit ")]),s("v-btn",{attrs:{text:"",disabled:t.processes.transaction.good||t.processes.transaction.active},on:{click:function(e){t.stepNum=2}}},[t._v("Back")])],1)],1)],1)],1)],1)],1)},Ee=[],De={data:function(){return{stepNum:0,inputValid:{card:{isValid:!0,rules:[function(t){return t&&/^[0-9]+$/.test(t)||"Card must contain digits only"},function(t){return t&&16===t.length||"Card must be 16 numbers long"}]},money:{isValid:!0,rules:[function(t){return t>0||"The amount of oney to send cannot be less than 0 or equal to 0"}]}},transaction:{data:{receiver_card:"",sum:"",description:"",target_endpoint:"/api/terminal"}},processes:{transaction:{active:!1,bad:!1,good:!1,failed:!1,details:"",error:""}}}},methods:{makeTransaction:function(){var t=this;this.processes.transaction.active=!0,this.$store.dispatch("performTransaction",Object.assign({},this.transaction.data)).then((function(e){console.log(e),e.status===I().finished.pos?(t.processes.transaction.active=!1,t.processes.transaction.bad=!1,t.processes.transaction.failed=!1,t.processes.transaction.good=!0,t.processes.transaction.details=e.details,t.transaction.data.receiver_card="",t.transaction.data.sum="",t.transaction.data.description="",setTimeout((function(){t.processes.transaction.good=!1,t.stepNum=0,t.$router.push({path:"/terminal"})}),1e3)):(t.processes.transaction.active=!1,t.processes.transaction.bad=!0,t.processes.transaction.failed=!1,t.processes.transaction.good=!1,t.processes.transaction.details=e.details)}),(function(e){t.processes.transaction.bad=!1,t.processes.transaction.active=!1,t.processes.transaction.failed=!0,t.processes.transaction.details=e.details,t.processes.transaction.error=e.error}))}}},Re=De,Ue=(s("f166"),Object(d["a"])(Re,ke,Ee,!1,null,null,null)),Ae=Ue.exports;u()(Ue,{VAlert:O["a"],VBtn:C["a"],VCard:j["a"],VCardActions:L["a"],VCardText:L["b"],VContainer:y["a"],VDivider:Ot["a"],VForm:M["a"],VScrollXTransition:v["d"],VStepper:qt["a"],VStepperContent:jt["a"],VStepperHeader:Lt["a"],VStepperItems:Lt["b"],VStepperStep:Ft["a"],VTextField:et["a"],VTextarea:Qt["a"]}),i["a"].use(f["a"]);var Pe=[{path:"/",name:"home",component:U},{path:"/terminal",component:we,children:[{path:"",component:ye},{path:"replenish",component:Ae}]},{path:"/berking",component:at,children:[{path:"",component:yt,name:"bankingHome"},{path:"cards",component:At,name:"bankingCards"},{path:"transactions",component:Mt,name:"bankingTransactions"},{path:"templates",component:se,name:"bankingTemplates"},{path:"deposits",component:_e,name:"bankingDeposits"}]},{path:"*",redirect:"/"}],Ie=new f["a"]({mode:"history",base:"/",routes:Pe}),$e=Ie,Ne=(s("4e827"),s("2f62")),Oe=s("0e44"),qe=s("88b4"),je=s.n(qe),Le=new je.a({isCompression:!1});i["a"].use(Ne["a"]);var Fe=new Ne["a"].Store({plugins:[Object(Oe["a"])({storage:{getItem:function(t){return Le.get(t)},setItem:function(t,e){return Le.set(t,e)},removeItem:function(t){return Le.remove(t)}}})],state:{request:{status:"",details:"",error:""},user:{cards:[],transactions:[],templates:[],deposits:[],info:{},authorized:!1,webtoken:"",refresh_token:""}},mutations:{ADD_CARD:function(t,e){t.user.cards.push(e)},ADD_TEMPLATE:function(t,e){t.user.templates.push(e)},SET_CARDS:function(t,e){t.user.cards=e.slice()},SET_TEMPLATES:function(t,e){t.user.templates=e.slice()},SET_TRANSACTIONS:function(t,e){var s=e;s.sort((function(t,e){var s=Number(t.date.match(/\d+\.\d+\.\d+/)[0].split(".").join("")),a=Number(e.date.match(/\d+\.\d+\.\d+/)[0].split(".").join(""));return s>a?1:s<a?-1:0})),t.user.transactions=s.slice()},SET_DEPOSITS:function(t,e){t.user.deposits=e.slice()},SET_USER:function(t,e){t.user.info.email=e.email,t.user.webtoken=e.webtoken,t.user.refresh_token=e.refresh_token,t.user.authorized=!0},UPDATE_USER_TOKENS:function(t,e){t.user.webtoken=e.webtoken,t.user.refresh_token=e.refresh_token},PERFORM_TRANSACTION:function(t,e){t.user.transactions.push(e)},CREATE_DEPOSIT:function(t,e){t.user.deposits.push(e)},LOGIN:function(t){t.user.authorized=!0,sessionStorage.setItem("authorized",!0),localStorage.removeItem("vuex")},LOGOUT:function(t){t.user.authorized=!1,sessionStorage.setItem("authorized",!1),localStorage.removeItem("vuex")},SET_REQUEST_STATUS:function(t,e){t.request=e},SET_IS_AUTHORIZED:function(t,e){t.user.authorized=e,localStorage.removeItem("vuex")}},actions:{fetchDeposits:function(t){return t.commit("SET_REQUEST_STATUS",{status:I().active,details:"Fetching deposits."}),new Promise((function(e,s){r.a.post("/api/user_deposits",JSON.stringify({email:t.getters.getUserData.email,webtoken:t.getters.getWebtoken}),{headers:{"Content-Type":"application/json"}}).then((function(s){t.commit("SET_REQUEST_STATUS",{status:I().finished.pos,details:"Deposits successfuly fetched."});var a=[];"null"!==s.data.data&&null!==s.data.data&&a.push(s.data.data),t.commit("SET_DEPOSITS",a),e(t.getters.getRequestStatus)})).catch((function(e){t.commit("SET_REQUEST_STATUS",{status:I().failed,details:"Failed to fetch deposits.",error:e}),s(t.getters.getRequestStatus)}))}))},fetchTemplates:function(t){return t.commit("SET_REQUEST_STATUS",{status:I().active,details:"Fetching templates."}),new Promise((function(e,s){r.a.post("/api/user_templates",JSON.stringify({email:t.getters.getUserData.email,webtoken:t.getters.getWebtoken}),{headers:{"Content-Type":"application/json"}}).then((function(s){t.commit("SET_REQUEST_STATUS",{status:I().finished.pos,details:"Templates successfuly fetched."});var a=[];"null"!==s.data.data&&null!==s.data.data&&Object.keys(s.data.data).forEach((function(t){"null"!==s.data.data[t]&&null!==s.data.data[t]&&Object.keys(s.data.data[t]).forEach((function(e){null!==s.data.data[t][e]&&"null"!==s.data.data[t][e]&&a.push(s.data.data[t][e])}))})),t.commit("SET_TEMPLATES",a),e(t.getters.getRequestStatus)})).catch((function(e){t.commit("SET_REQUEST_STATUS",{status:I().failed,details:"Failed to fetch templates.",error:e}),s(t.getters.getRequestStatus)}))}))},fetchTransactions:function(t){return t.commit("SET_REQUEST_STATUS",{status:I().active,details:"Fetching transactions."}),new Promise((function(e,s){r.a.post("/api/user_transactions",JSON.stringify({email:t.getters.getUserData.email,webtoken:t.getters.getWebtoken}),{headers:{"Content-Type":"application/json"}}).then((function(s){t.commit("SET_REQUEST_STATUS",{status:I().finished.pos,details:"Transactions successfuly fetched."});var a=[];"null"!==s.data.data&&null!==s.data.data&&Object.keys(s.data.data).forEach((function(t){"null"!==s.data.data[t]&&null!==s.data.data[t]&&Object.keys(s.data.data[t]).forEach((function(e){a.push(s.data.data[t][e])}))})),t.commit("SET_TRANSACTIONS",a),e(t.getters.getRequestStatus)})).catch((function(e){t.commit("SET_REQUEST_STATUS",{status:I().failed,details:"Failed to fetch transactions.",error:e}),s(t.getters.getRequestStatus)}))}))},fetchCards:function(t){return t.commit("SET_REQUEST_STATUS",{status:I().active,details:"Fetching cards."}),new Promise((function(e,s){r.a.post("/api/user_cards",JSON.stringify({email:t.getters.getUserData.email,webtoken:t.getters.getWebtoken}),{headers:{"Content-Type":"application/json"}}).then((function(s){t.commit("SET_REQUEST_STATUS",{status:I().finished.pos,details:"Cards successfuly fetched."});var a=[];"null"!==s.data.data&&null!==s.data.data&&Object.keys(s.data.data).forEach((function(t){a.push(s.data.data[t])})),t.commit("SET_CARDS",a),e(t.getters.getRequestStatus)})).catch((function(e){t.commit("SET_REQUEST_STATUS",{status:I().failed,details:"Failed to fetch cards.",error:e}),s(t.getters.getRequestStatus)}))}))},addCard:function(t,e){return t.commit("SET_REQUEST_STATUS",{status:I().active,details:"Creating card for the user."}),new Promise((function(s,a){r.a.post("/api/create_card",JSON.stringify({email:t.getters.getUserData.email,card_name:e,webtoken:t.getters.getWebtoken}),{headers:{"Content-Type":"application/json"}}).then((function(e){t.commit("SET_REQUEST_STATUS",{status:I().finished.pos,details:"Card successfuly created."}),t.commit("ADD_CARD",e.data.data),s(t.getters.getRequestStatus)})).catch((function(e){t.commit("SET_REQUEST_STATUS",{status:I().failed,details:"Failed to create new card.",error:e}),a(t.getters.getRequestStatus)}))}))},addTemplate:function(t,e){return t.commit("SET_REQUEST_STATUS",{status:I().active,details:"Creating template."}),e.webtoken=t.getters.getWebtoken,e.email=t.getters.getUserData.email,new Promise((function(s,a){r.a.post("/api/make_template",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((function(a){"success"===a.data.status?(t.commit("SET_REQUEST_STATUS",{status:I().finished.pos,details:"Template created successfuly."}),t.commit("ADD_TEMPLATE",e)):t.commit("SET_REQUEST_STATUS",{status:I().finished.neg,details:"Receiver card does not exist."}),s(t.getters.getRequestStatus)})).catch((function(e){t.commit("SET_REQUEST_STATUS",{status:I().failed,details:"Failed to create a template.",error:e}),a(t.getters.getRequestStatus)}))}))},performTransaction:function(t,e){return t.commit("SET_REQUEST_STATUS",{status:I().active,details:"Performing transaction."}),"/api/terminal"!==e.target_endpoint&&(e.webtoken=t.getters.getWebtoken),e.email=t.getters.getUserData.email,new Promise((function(s,a){r.a.post(e.target_endpoint,JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((function(a){"success"===a.data.status?(t.commit("SET_REQUEST_STATUS",{status:I().finished.pos,details:"Transaction performed successfuly."}),t.commit("PERFORM_TRANSACTION",e)):t.commit("SET_REQUEST_STATUS",{status:I().finished.neg,details:a.data.details}),s(t.getters.getRequestStatus)})).catch((function(e){t.commit("SET_REQUEST_STATUS",{status:I().failed,details:"Failed to perform a transactiom.",error:e}),a(t.getters.getRequestStatus)}))}))},createDeposit:function(t,e){return t.commit("SET_REQUEST_STATUS",{status:I().active,details:"Creating deposit."}),e.webtoken=t.getters.getWebtoken,e.email=t.getters.getUserData.email,console.log(e),new Promise((function(s,a){r.a.post("/api/make_deposit",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((function(){t.commit("SET_REQUEST_STATUS",{status:I().finished.pos,details:"Deposit successfuly created."}),t.commit("CREATE_DEPOSIT",e),s(t.getters.getRequestStatus)})).catch((function(e){t.commit("SET_REQUEST_STATUS",{status:I().failed,details:"Failed to create deposit.",error:e}),a(t.getters.getRequestStatus)}))}))},changePassword:function(t,e){return t.commit("SET_REQUEST_STATUS",{status:I().active,details:"Changing password."}),console.log(e),new Promise((function(s,a){r.a.post("/api/recover_password",JSON.stringify({email:e.email,new_password:e.password_new,password:e.password}),{headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e),"success"===e.data.status?t.commit("SET_REQUEST_STATUS",{status:I().finished.pos,details:"Password successfuly changed."}):t.commit("SET_REQUEST_STATUS",{status:I().finished.neg,details:"Your old password is incorrect or you provided your old password as the new one."}),s(t.getters.getRequestStatus)})).catch((function(e){t.commit("SET_REQUEST_STATUS",{status:I().failed,details:"Failed to change password.",error:e}),a(t.getters.getRequestStatus)}))}))},registerUser:function(t,e){var s={};return s.user_name=e.name_first,s.user_name+=" ".concat(e.name_middle),s.user_name+=" ".concat(e.name_last),s.user_email=e.email,s.user_password=e.password,t.commit("SET_REQUEST_STATUS",{status:I().active,details:"Registering new user."}),new Promise((function(e,a){r.a.post("/api/register",JSON.stringify(s),{headers:{"Content-Type":"application/json"}}).then((function(a){"success"===a.data.status?(t.commit("SET_USER",{email:s.user_email,webtoken:a.data.webtoken,refresh_token:a.data.refresh_token}),t.commit("SET_REQUEST_STATUS",{status:I().finished.pos,details:"New user successfuly registered."}),t.commit("LOGIN")):t.commit("SET_REQUEST_STATUS",{status:I().finished.neg,details:"User with such email already exists."}),e(t.getters.getRequestStatus)})).catch((function(e){t.commit("SET_REQUEST_STATUS",{status:I().failed,details:"Failed to register new user.",error:e}),a(t.getters.getRequestStatus)}))}))},authorizeUser:function(t,e){return t.commit("SET_REQUEST_STATUS",{status:I().active,details:"Authorizing user."}),new Promise((function(s,a){r.a.post("/api/authorize",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((function(a){"success"===a.data.status?(t.commit("SET_REQUEST_STATUS",{status:I().finished.pos,details:"User successfuly authorized."}),t.commit("LOGIN"),t.commit("SET_USER",{email:e.email,webtoken:a.data.webtoken,refresh_token:a.data.refresh_token})):t.commit("SET_REQUEST_STATUS",{status:I().finished.neg,details:"You provided invalid credentials. Check your email or password"}),s(t.getters.getRequestStatus)})).catch((function(e){t.commit("SET_REQUEST_STATUS",{status:I().failed,details:"Failed to authorize the user.",error:e}),a(t.getters.getRequestStatus)}))}))},logout:function(t){t.commit("LOGOUT")},calculateIncome:function(t,e){return t.commit("SET_REQUEST_STATUS",{status:I().active,details:"Calculating income."}),console.log(e),new Promise((function(s,a){r.a.post("/api/preview_before_deposit",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((function(e){"success"===e.data.status&&t.commit("SET_REQUEST_STATUS",{status:I().finished.pos,details:"Deposit calculated successfuly."}),s(e.data.data.end_sum)})).catch((function(e){t.commit("SET_REQUEST_STATUS",{status:I().failed,details:"Failed to calculate the deposit.",error:e}),a(t.getters.getRequestStatus)}))}))},refreshWebtoken:function(t){return t.commit("SET_REQUEST_STATUS",{status:I().active,details:"Refreshing token."}),new Promise((function(e,s){r.a.post("/api/refresh_token",{refresh_token:t.getters.getRefreshToken,webtoken:t.getters.getWebtoken,email:t.getters.getUserData.email}).then((function(s){t.commit("SET_REQUEST_STATUS",{status:I().active,details:"Token successfuly refreshed."}),t.commit("UPDATE_USER_TOKENS",{webtoken:s.data.webtoken,refresh_token:s.data.refresh_token}),e("OK")})).catch((function(t){s(t)}))}))}},getters:{getCards:function(t){return t.user.cards},getTemplates:function(t){return t.user.templates},getTransactions:function(t){return t.user.transactions},getDeposits:function(t){return t.user.deposits},getUserData:function(t){return t.user.info},getAuthorizationStatus:function(t){return t.user.authorized},getRequestStatus:function(t){return t.request},getWebtoken:function(t){return t.user.webtoken},getRefreshToken:function(t){return t.user.refresh_token}}}),Qe=s("f309");i["a"].use(Qe["a"]);var Be=new Qe["a"]({icons:{iconfont:"mdi"}});i["a"].config.productionTip=!1,r.a.defaults.baseURL="http://".concat(window.location.host,"/"),i["a"].directive("test",{bind:function(t,e){Object.keys(e.value).forEach((function(s){t.setAttribute("data-test-".concat(s),e.value[s])}))}}),i["a"].filter("formatCardNum",(function(t){var e=t;if(void 0===t)return"";if("Berking TERMINAL"===t)return t;Number.isInteger(e)&&(e=t.toString());for(var s="",a=4;a<=16;a+=4)s+="".concat(e.slice(a-4,a)," — ");return s.slice(0,s.length-2)})),i["a"].filter("formatCardNumWithMask",(function(t){var e=t;return void 0===t?"":"Berking TERMINAL"===t?t:(Number.isInteger(e)&&(e=t.toString()),"".concat(e.slice(0,4)," — .... — .... — ").concat(e.slice(12,16)))})),new i["a"]({router:$e,store:Fe,vuetify:Be,render:function(t){return t(_)}}).$mount("#app")},"67d2":function(t,e,s){},"7b48":function(t,e,s){"use strict";var a=s("4a9c"),r=s.n(a);r.a},"805c":function(t,e,s){"use strict";var a=s("9bfd"),r=s.n(a);r.a},"89d8":function(t,e,s){"use strict";var a=s("8dc9"),r=s.n(a);r.a},"89fc":function(t,e,s){"use strict";var a=s("a5ad"),r=s.n(a);r.a},"8dc9":function(t,e,s){},"9bfd":function(t,e,s){},a243:function(t,e,s){"use strict";var a=s("526e"),r=s.n(a);r.a},a5ad:function(t,e,s){},b66d:function(t,e,s){"use strict";var a=s("34e2"),r=s.n(a);r.a},d5a8:function(t,e,s){"use strict";var a=s("0b44"),r=s.n(a);r.a},e058:function(t,e,s){"use strict";var a=s("67d2"),r=s.n(a);r.a},f166:function(t,e,s){"use strict";var a=s("2b20"),r=s.n(a);r.a}});
//# sourceMappingURL=app.238c90c6.js.map